# Sample/Example 

## Running the sample

In camera-streaming-daemon samples repository there is one sample to list all drone's video stream found.
The first step to build the samples:

```
make samples
```

And then in a computer connected to the target drone using WiFi or any other Ethernet connection:

```
./samples/camera-sample-mavlink-client
```

More information about the camera-sample-mavlink-client is located [below](#camera-sample-mavlink-client).

-----------------------------------------------
// Below is from Wiki ///
---------------------------------------------------

To build the samples run:

```
make samples
```

## camera-sample-client

This sample is used to test camera-streaming-daemon avahi publishing.
To use it, first start the camera-streaming-daemon:

```
./camera-streaming-daemon
```

And run the client sample:
```
./samples/camera-sample-client
```

And the program will output all camera-streaming-daemon streams published. The output will be similar to:
```
    (main_sample_client.cpp:110) Camera Streaming Client
    (main_sample_client.cpp:48) Service resolved: '/video0' (rtsp://127.0.0.1:8554/video0)
    (main_sample_client.cpp:51) TXT: ["name=Integrated_Webcam_HD" "frame_size[0]=YUYV(640x480,160x120,320x180,320x240,424x240,640x360,640x480)" "frame_size[1]=MJPG(848x480,960x540,1280x720)"]
    (main_sample_client.cpp:48) Service resolved: '/video0' (rtsp://127.0.0.1:8554/video0)
    (main_sample_client.cpp:51) TXT: ["name=Integrated_Webcam_HD" "frame_size[0]=YUYV(640x480,160x120,320x180,320x240,424x240,640x360,640x480)" "frame_size[1]=MJPG(848x480,960x540,1280x720)"]
```

## camera-sample-mavlink-client
camera-sample-mavlink-client is an interactive sample to test mavlink publishing. The available streams are listed and the selected stream, with the selected resolution is played.

To use it, first start the camera-streaming-daemon:
```
./csd
```

And then, run the client sample:
```
./samples/camera-sample-mavlink-client
```

The output will be similar to:
```
Open UDP [5]
Bind UDP [5] 0.0.0.0:14550
Camera Daemon found: sysid: 42

Streams found:
1 - Integrated_Webcam_HD

    Please make your selection (type stream number):
1
Select Horizontal resolution (0 for default): 
0
Select Vertical resolution (0 for default): 
0
Stream Information:
   Status: not streaming
   Resolution: 1280x720
   URI: rtsp://192.168.8.1:8554//video0
```

And if gstreamer client gst-launch-1.0 is installed, the selected video will be played.

## camera-sample-custom

This sample demonstrate how to extend the camera-streaming-daemon adding extra streams. This sample exports all streams exported by camera-streaming-daemon and one extra stream with a dummy video generated by videotestsrc gstreamer plugin.
To test it run:
```
./samples/camera-sample-custom
```

And watch the video identified by /custom using vlc, for example:
```
vlc rtsp://192.168.1.1:8554/custom
```

More information on how to extend the daemon in [Extending Camera Streaming Daemon](Extending-Camera-Streaming-Daemon)